{% extends 'maincode.html' %}
{% load static %}
{% block content %}

{% include 'logo.html' %}
{% include 'navdropdowns.html' %}

<!--Hero-->
<div class="hero-container2">
</div>

<!--Nav--Full-->
<div class="nav-container-super show" id="peek">
    <div class="nav-container">
        <div class="search-container">
            <!--Searchbar-->
            <div class="search" id="search-full">
                <form method="GET" action="{% url 'gsearch' %}">
                    <img class="search-icon dark" id="search-icon-full" src="{% static 'assets/search.png' %}" height="28">
                    <img class="close" id="close-full" src="{% static 'assets/cancel-search.png' %}" height="28">
                    <input class="search-input" type="text" name="q" placeholder="Search kiseu.com" onclick="submit">
                    <button class="go" type="submit" onclick="submit"><img id="go-icon" src="{% static 'assets/search.png' %}"
                            height="30"></button>

                </form>
                <ul class="autocomplete-result-list"></ul>
            </div>

        </div>
        <div class="nav-bar active" id="nav-bar-full">
            <div class="nav">
                <ul>
                    <div id="highlight">
                        <li><a class="btn highlight" href="#">
                                <div class="menu-item"><img class="nav-icon"
                                        src="{% static 'assets/code.png' %}" height="20">Code<div class="underline"></div>
                                </div>
                            </a></li>
                        <li><a class="btn" href="digitalart">
                                <div class="menu-item" id="digitalartid"><img class="nav-icon" id="digitalarticon"
                                        src="{% static 'assets/digitalart.png' %}" height=20">Digital art<div class="underline2"></div>
                                </div>
                            </a></li>
                        <li><a class="btn" href="music">
                                <div class="menu-item" id="musicid"><img class="nav-icon" id="musicicon"
                                        src="{% static 'assets/music.png' %}" height="20">Music<div class="underline"></div>
                                </div>
                            </a></li>
                        <li><a class="btn" href="explore">
                                <div class="menu-item" id="exploreid"><img class="nav-icon" id="exploreicon" src="{% static 'assets/explore.png' %}"
                                        height="20">Explore<div class="underline2"></div>
                                </div>
                            </a>
                            <!--<div class="drop-down-menu">
            <div class="dropdown-link" id="stats">Brief Stats</div>
            <div class="dropdown-link" id="testimonials">Testimonials</div>
            <div class="dropdown-link" id="news-events">News & Events</div>
            <div class="dropdown-link" id="gallery">Gallery</div>
            <div class="dropdown-link" id="location">Map & Directions</div>
        </div>-->
                        </li>
                    </div>
                </ul>
            </div>
        </div>
        <div class="call-to-action"><button class="generic-button2" id="contact-trigger">Contact me</button></div>
        <div class="profile" id="cartbtn">
            <img class="cart" id="cartflip" src="{% static 'assets/cart.png' %}" height="22">
            <div class="cart-count">0</div>
        </div>

        {% if request.user.is_authenticated %}
        <!--logged in icon-->
        <div class="profilec" id="userprofileicon">
            <img src="{{request.user.profile.profilepic.url}}" height="30" alt="profile picture">
        </div>
        <script>
            const userdropdowntarget2 = document.getElementById("userdropdown2");
            const userprofileicon = document.getElementById("userprofileicon");
            const closeuserdropdown2 = document.getElementById("userdropdownclose2");
            userprofileicon.addEventListener("click", () => {
                    userdropdowntarget2.classList.toggle("open");
                });
            closeuserdropdown2.addEventListener("click", () => {
                    userdropdowntarget2.classList.toggle("open");
                });
        </script>
        {% else %}
        <!--Not logged in icon-->
        <div class="profileb" id="user-icon">
            <img id="profile-btn" class="cart" src="{% static 'assets/user.png' %}" height="22">
        </div>
        <script>
            //User-drop-down
            const userdropdown = document.getElementById("profile-btn");
            const userdropdowntarget = document.getElementById("userdropdown");
            const closeuserdropdown = document.getElementById("userdropdownclose");
            userdropdown.addEventListener("click", () => {
                userdropdowntarget.classList.toggle("open");
            });
            closeuserdropdown.addEventListener("click", () => {
                userdropdowntarget.classList.toggle("open");
            });
             const userflip = document.getElementById("profile-btn");

                window.addEventListener("scroll", () => {
                    const currentScroll = window.pageYOffset;
                    if (currentScroll <= 100) {
                        userflip.style.filter = "invert(100)";
                    }
                    if (currentScroll > 100) {
                        userflip.style.filter = "invert(0)";
                    }
                });
        </script>
        {% endif %}
        


    </div>

    <!--Mobile-toggle-->
    <div class="nav-mobile-container">
        <div class="search" id="search-mobile">
            <form method="GET" action="{% url 'gsearch' %}">
                <img class="search-icon dark" id="search-icon-mobile" src="{% static 'assets/search.png' %}" height="28">
                <img class="close" id="close-mobile" src="{% static 'assets/cancel-search.png' %}" height="22">
                <input class="search-input2" type="text" name="q" placeholder="Search.." onclick="submit">
                <button class="go" type="submit" onclick="submit"><img id="go-mobile" src="{% static 'assets/search.png' %}"
                        height="22"></button>
            </form>
            <ul class="autocomplete-result-list"></ul>
        </div>
        <img class="toggle dark" id="menu-toggle" src="{% static 'assets/menu-toggle.png' %}" height="28">
    </div>
</div>

<!--Navbar-Mobile-->
<div class="navmobile" id="nav-mobile">
    <ul class="menumobile-list">
        <img class="close-menu" id="menu-close" src="{% static 'assets/close.png' %}" height="28">
        <li><a href="explore"><img src="{% static 'assets/explore.png' %}" height="15">Explore</a></li>
        <li><a href="music"><img src="{% static 'assets/music.png' %}" height="15">Music</a></li>
        <li><a href="digitalart"><img src="{% static 'assets/digitalart.png' %}" height="15">Digital art</a></li>
        <li><a href="#"><img src="{% static 'assets/code.png' %}" height="15">code</a></li>

    </ul>
    <span class="button-pop" id="contact-trigger2">Contact Me</span>
    <div class="profile2">
        <img id="cartbtn2" class="cart2" src="{% static 'assets/cart.png' %}" height="22">
        <div class="cart-count"> 0 </div>

        {% if request.user.is_authenticated %}
        <!--logged in icon-->
        <div class="profiled" id="userprofileicon2">
            <img src="{{request.user.profile.profilepic.url}}" height="30" alt="profile picture">
        </div>
        <script>
            const userprofileicon2 = document.getElementById("userprofileicon2");
            userprofileicon2.addEventListener("click", () => {
                    userdropdowntarget2.classList.toggle("open");
                }); 
        </script>
        {% else %}
        <!--Not logged in icon-->
        <img id="profile-btn-mobile" class="cart3" src="{% static 'assets/user.png' %}" height="22">
        <script>
                const userdropdown2 = document.getElementById("profile-btn-mobile");

                userdropdown2.addEventListener("click", () => {
                        userdropdowntarget.classList.toggle("open");
                    });
        </script>
        {% endif %}

    </div>

</div>

<div class="item-count"><h5>{{item_count}} items found..</h5></div>

<!--Code-->
<div class="category-container">
    <a href="#" class="category-header"><span>Code</span></a>
    <div class="category-subcontainer">
        {% for item in codeitems %}
        <a class="anchor" href="{{item.mainlink}}" target="_blank">
        <div class="card-small">
            <span class="category-text"><b>{{item.supercategory.name}}</b>/{{item.category.name}}/{{item.subcategory.name}}</span>
            <span class="name-text"><b>{{item.name}}</b></span>
            <span class="description-text">{{item.description}}</span>
            <span class="date-text">{{item.created|timesince}} ago</span>
        </div>
        </a>
        {% endfor %}
    </div>
</div>


{% endblock %}